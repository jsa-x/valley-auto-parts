{% extends "base.html" %}
{% block title %}Shop | Valley Auto Parts{% endblock %}

{% block content %}

<div class="w-full">

  {# Status banner after login, etc. #}
  {% if banner %}
  <div
    class="mb-4 rounded-md border border-green-300 bg-green-100 text-green-700 text-sm font-medium px-4 py-2 text-center shadow"
  >
    {{ banner }}
  </div>
  {% endif %}

  <!-- welcome text -->
  <header class="page-header mb-4">
    <h1 class="text-xl font-semibold text-slate-800">
      Auto Parts Currently In Stock
    </h1>

    {% if logged_in %}
      <p class="text-slate-600 text-sm mt-1">
        Welcome back, {{ username }}. Add parts to your cart.
      </p>
    {% else %}
      <p class="text-slate-600 text-sm mt-1">
        Brakes, filters, and more — log in to start adding items.
      </p>
    {% endif %}
  </header>

  <!-- vehicle selector, search and count -->
  <div class="mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">

    <!-- vehicle dropdown -->
    <div class="flex items-center gap-2">
      <label for="vehicleSelect" class="text-xs text-slate-600 whitespace-nowrap">
        Vehicle:
      </label>
      <select
        id="vehicleSelect"
        class="rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
        <option value="">All vehicles</option>
        <option value="2010 Honda Civic">2010 Honda Civic</option>
        <option value="2015 Toyota Corolla">2015 Toyota Corolla</option>
        <option value="2012 Ford F-150">2012 Ford F-150</option>
        <option value="2014 Chevy Silverado">2014 Chevy Silverado</option>
        <option value="2016 Nissan Altima">2016 Nissan Altima</option>
      </select>
    </div>

    <!-- search and count -->
    <div class="flex flex-col sm:flex-row sm:items-center gap-2 w-full sm:w-auto">
      <input
        id="search"
        type="search"
        placeholder="Search parts…"
        class="w-full sm:w-72 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
      <p id="count" class="text-xs text-slate-500"></p>
    </div>
  </div>

  <!-- Where products will be rendered by JavaScript -->
  <div
    id="list"
    class="grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
  ></div>

</div>

<!-- Pass product data from Flask to JS -->
<script>
  window.PRODUCTS = {{ parts | tojson }};
</script>

{% endblock %}
